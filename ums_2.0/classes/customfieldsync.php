<?php	require_once('classes/user.php');	require_once('classes/mysql.php');	require_once('classes/customfield.php');	// used to synchronize columns of user table with custom field table	class CustomFieldSync	{			public static function synchronize()		{			$result = MySQL::executeQuery('SHOW COLUMNS FROM ' . User::$table);			$userFieldNames = array();			while ($fetch = mysql_fetch_array($result))			{				// REFACTOR THIS!!!				if ($fetch['Field'] == 'username' or 					$fetch['Field'] == 'email' or 					$fetch['Field'] == 'passwordHash' or 					$fetch['Field'] == 'id' or					$fetch['Field'] == 'isAdmin') continue;				$userFieldNames[] = $fetch['Field'];			}						$customFields = Synchronizable::load('CustomField', CustomField::$table);			foreach ($customFields as $customField)			{				$customFieldNames[] = $customField->getName();				if (!in_array($customField->getName(), $userFieldNames))				{					if ($customField->getType() == 'text')						$type = 'VARCHAR(32)';					elseif ($customField->getType() == 'number')						$type = 'INT(11)';										MySQL::executeQuery('ALTER TABLE ' . User::$table . ' ADD ' . $customField->getName() . " $type");				}			}						foreach ($userFieldNames as $userFieldName)			{				if (!in_array($userFieldName, $customFieldNames))					MySQL::executeQuery('ALTER TABLE ' . User::$table . " DROP COLUMN $userFieldName");			}		}		}	?>